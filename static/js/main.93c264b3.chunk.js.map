{"version":3,"sources":["components/Content/index.tsx","components/Footer/index.tsx","components/Header/index.tsx","components/VideoContainer/index.tsx","components/Video/index.tsx","data/index.ts","components/VideoPicker/index.tsx","components/VideoExplorer/index.tsx","App.tsx","index.tsx"],"names":["Content","className","href","id","Footer","Header","process","REACT_APP_AUTHORS","REACT_APP_GITHUB_URL","icon","REACT_APP_PAPER_URL","VideoContainer","props","elem","state","childWidth","getElemRef","bind","childStyle","this","width","ref","React","Children","map","children","child","type","style","recalculateChildSizes","desiredChildWidth","getDesiredChildWidth","setState","partitions","thisPartition","forEach","length","push","desiredSize","parentWidth","getBoundingClientRect","itemsPerRow","Math","max","partition","Component","VIDEO_BASE_URL","Video","videoElem","synchronized","getVideoElemRef","videoDataLoaded","onVideoRemove","onLockToSynchronization","onUnlockFromSynchronization","name","aria-label","title","onClick","videoFile","target","rel","src","muted","controls","updateElemState","removeEventListener","addEventListener","onVideoDurationKnown","duration","readyState","skew","abs","currentTime","position","paused","play","presets","_presets","fileTree","_fileTree","getVideoFile","video","VideoPicker","openVideoPicker","onPickerCancel","onLoadPreset","onRestartVideos","pickerOpen","selectedEnvironment","selectedAdversary","role","data-toggle","aria-haspopup","aria-expanded","aria-labelledby","videos","key","isOpen","contentLabel","shouldCloseOnOverlayClick","Object","keys","environment","onSelectEnvironment","adversary","onSelectAdversary","victim","onPick","disabled","videoIn","alreadyPickedVideos","onAddVideo","enviroment","needle","JSON","stringify","indexOf","VideoExplorer","videoLengths","videoPosition","lastLoopStarted","window","performance","now","tick","onRemoveVideo","setInterval","clearInterval","updateInterval","videoFiles","entries","slice","videoToRemove","filter","videoUrl","values","currentLoopTime","getMaxVideoLength","App","library","add","faBan","faExternalLinkAlt","faFastBackward","faFile","faGithub","faLock","faPause","faPlay","faPlus","faUnlock","faWindowClose","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.93c264b3.chunk.js","sourcesContent":["import React, { FunctionComponent } from \"react\";\nimport \"./index.scss\";\n\nconst Content: FunctionComponent = () => (\n  <div className=\"container\">\n    <div className=\"row\">\n      <div className=\"col-sm-2\">\n        <ul className=\"nav flex-sm-column\">\n          <li className=\"nav-item\">\n            <a className=\"nav-link active\" href=\"#abstract\">\n              Abstract\n            </a>\n          </li>\n          <li className=\"nav-item\">\n            <a className=\"nav-link\" href=\"#videos\">\n              Explore Videos\n            </a>\n          </li>\n        </ul>\n      </div>\n\n      <div className=\"col-sm-10\">\n        <section className=\"contentSection\">\n          <h2 id=\"abstract\">Abstract</h2>\n          <p className=\"lead\">\n            Deep reinforcement learning (RL) policies are known to be vulnerable\n            to adversarial perturbations to their observations, similar to\n            adversarial examples for classifiers. However, an attacker is not\n            usually able to directly modify observations. This might lead one to\n            wonder: is it possible to attack an RL agent simply by choosing an\n            adversarial policy acting in a shared environment so as to create\n            natural observations that are adversarial? We demonstrate the\n            existence of adversarial policies in zero-sum simulated robotics\n            games, against state-of-the-art victims trained via self-play to be\n            robust to adversaries. The adversarial policies reliably win against\n            the victims despite not playing the game: they fall to the ground,\n            and look similar to a random policy. We find our attack is more\n            successful in high-dimensional environments, and induces activations\n            in the victim that are extremely unlikely to occur when playing a\n            normal opponent.\n          </p>\n        </section>\n      </div>\n    </div>\n  </div>\n);\n\nexport default Content;\n","import React, { FunctionComponent } from \"react\";\n\nimport \"./index.scss\";\n\nconst Footer: FunctionComponent = () => <footer className=\"container-fluid\" />;\n\nexport default Footer;\n","import React, { FunctionComponent } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport \"./index.scss\";\n\nconst Header: FunctionComponent = () => (\n  <header className=\"container-fluid\">\n    <div className=\"row\">\n      <div className=\"col\">\n        <h1>Adversarial Policies</h1>\n        {process.env.REACT_APP_AUTHORS != null &&\n          <h4>{process.env.REACT_APP_AUTHORS}</h4>\n        }\n        <p>\n          {process.env.REACT_APP_GITHUB_URL != null &&\n            <a\n            href={process.env.REACT_APP_GITHUB_URL}\n            className=\"download-link\"\n            >\n            <FontAwesomeIcon icon={[\"fab\", \"github\"]} />\n            GitHub\n            </a>\n          }\n          &nbsp;\n          {process.env.REACT_APP_PAPER_URL != null &&\n            <a href={process.env.REACT_APP_PAPER_URL} className=\"download-link\">\n            <FontAwesomeIcon icon=\"file\" />\n            Paper\n            </a>\n          }\n        </p>\n      </div>\n    </div>\n  </header>\n);\n\nexport default Header;\n","import React, { CSSProperties, ReactNode } from \"react\";\n\nimport \"./index.scss\";\n\ninterface VideoContainerState {\n  childWidth: number | null;\n}\n\nconst MIN_CHILD_WIDTH = 480;\n\nexport default class VideoContainer extends React.Component<{}, VideoContainerState> {\n  private elem: HTMLDivElement | null = null;\n\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      childWidth: null,\n    };\n    this.getElemRef = this.getElemRef.bind(this);\n  }\n\n  public render() {\n    const childStyle: CSSProperties = {};\n    if (this.state.childWidth) {\n      // take into account margins and borders\n      childStyle.width = `${this.state.childWidth - 16}px`;\n    }\n\n    return (\n      <div className=\"VideoContainer\" ref={this.getElemRef}>\n        {React.Children.map(this.props.children, child => (\n          // @ts-ignore\n          child.type === 'br' ? child : <div style={childStyle}>{child}</div>\n        ))}\n      </div>\n    )\n  }\n\n  public componentDidUpdate() {\n    this.recalculateChildSizes();\n  }\n\n  private getElemRef(elem: HTMLDivElement) {\n    this.elem = elem;\n    this.recalculateChildSizes();\n  }\n\n  private recalculateChildSizes() {\n    const desiredChildWidth = this.getDesiredChildWidth();\n    if (desiredChildWidth !== this.state.childWidth) {\n      this.setState({ childWidth: desiredChildWidth });\n    }\n  }\n\n  private getDesiredChildWidth() {\n    if (!this.elem) {\n      return null;\n    }\n\n    let partitions: ReactNode[][] = [];\n    let thisPartition: ReactNode[] = [];\n    React.Children.forEach(this.props.children, child => {\n      // @ts-ignore\n      if (child.type === \"br\") {\n        if (thisPartition.length > 0) {\n          partitions.push(thisPartition);\n        }\n        thisPartition = [];\n      } else {\n        thisPartition.push(child);\n      }\n    });\n    if (thisPartition.length > 0) {\n      partitions.push(thisPartition);\n    }\n\n    const parentWidth = this.elem.getBoundingClientRect().width;\n    let itemsPerRow = Math.max(...partitions.map(partition => partition.length));\n    let desiredSize;\n    do {\n      if (itemsPerRow <= 0) {\n        return MIN_CHILD_WIDTH;\n      }\n      desiredSize = parentWidth / itemsPerRow;\n      --itemsPerRow;\n    } while (desiredSize < MIN_CHILD_WIDTH);\n\n    return desiredSize;\n  }\n}\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport \"./index.scss\";\n\nconst VIDEO_BASE_URL =\n  \"https://adversarial-policies-public.s3.amazonaws.com/videos/\";\nconst VIDEO_PREVIEW_SUFFIX = \"_720p.mp4\";\nconst VIDEO_FULL_SUFFIX = \"_1080p.mp4\";\n\ninterface VideoProps {\n  name: string;\n  videoFile: string;\n  position: number;\n  onVideoDurationKnown: (duration: number) => void;\n  onVideoRemove: () => void;\n}\n\ninterface VideoState {\n  synchronized: boolean;\n}\n\nexport default class Video extends React.Component<VideoProps, VideoState> {\n  private videoElem: HTMLVideoElement | null = null;\n\n  constructor(props: VideoProps) {\n    super(props);\n    this.state = { synchronized: true };\n    this.getVideoElemRef = this.getVideoElemRef.bind(this);\n    this.videoDataLoaded = this.videoDataLoaded.bind(this);\n    this.onVideoRemove = this.onVideoRemove.bind(this);\n    this.onLockToSynchronization = this.onLockToSynchronization.bind(this);\n    this.onUnlockFromSynchronization = this.onUnlockFromSynchronization.bind(this);\n  }\n\n  public render() {\n    return (\n      <div className=\"Video\">\n        <h3 className=\"h5 Video__title\">\n          <span className=\"Video__title-content\">{this.props.name}</span>\n          <div className=\"btn-group float-right\">\n            {\n              this.state.synchronized\n              ?\n                <button\n                  className=\"btn btn-outline-primary\"\n                  aria-label=\"Enable video controls\"\n                  title=\"Enable video controls\"\n                  onClick={this.onUnlockFromSynchronization}\n                >\n                  <FontAwesomeIcon icon=\"lock\" />\n                </button>\n              :\n                <button\n                  className=\"btn btn-outline-primary\"\n                  aria-label=\"Synchronize video to global playback\"\n                  title=\"Synchronize video to global playback\"\n                  onClick={this.onLockToSynchronization}\n                >\n                  <FontAwesomeIcon icon=\"unlock\" />\n                </button>\n            }\n            <a\n              href={`${VIDEO_BASE_URL}${\n                this.props.videoFile\n              }${VIDEO_FULL_SUFFIX}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"btn btn-outline-secondary\"\n              title=\"Open video in new tab\"\n              aria-label=\"Open video in new tab\"\n            >\n              <FontAwesomeIcon icon=\"external-link-alt\" />\n            </a>\n            <button\n              className=\"btn btn-outline-danger\"\n              title=\"Remove video\"\n              aria-label=\"Remove video\"\n              onClick={this.onVideoRemove}\n            >\n              <FontAwesomeIcon icon=\"window-close\" />\n            </button>\n          </div>\n        </h3>\n\n        <div className=\"embed-responsive embed-responsive-16by9\">\n          <video\n            src={`${VIDEO_BASE_URL}${this.props.videoFile}${VIDEO_PREVIEW_SUFFIX}`}\n            ref={this.getVideoElemRef}\n            muted={true}\n            controls={!this.state.synchronized}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  public componentDidUpdate() {\n    this.updateElemState();\n  }\n\n  public componentWillUnmount() {\n    if (this.videoElem) {\n      this.videoElem.removeEventListener(\"loadeddata\", this.videoDataLoaded);\n    }\n  }\n\n  private getVideoElemRef(videoElem: HTMLVideoElement | null) {\n    this.videoElem = videoElem;\n    if (videoElem) {\n      videoElem.addEventListener(\"loadeddata\", this.videoDataLoaded);\n      this.updateElemState();\n    }\n  }\n\n  private videoDataLoaded() {\n    if (this.videoElem) {\n      this.props.onVideoDurationKnown(this.videoElem.duration);\n    }\n  }\n\n  private onLockToSynchronization() {\n    this.setState({ synchronized: true });\n  }\n\n  private onUnlockFromSynchronization() {\n    this.setState({ synchronized: false });\n  }\n\n  private onVideoRemove() {\n    this.props.onVideoRemove();\n  }\n\n  private updateElemState() {\n    if (!this.videoElem || this.videoElem.readyState < 2) {\n      return;\n    }\n\n    if (this.state.synchronized) {\n      const skew = Math.abs(this.videoElem.currentTime - this.props.position);\n      if (this.props.position > this.videoElem.duration) {\n        this.videoElem.currentTime = this.videoElem.duration;\n      } else if (skew > 0.2) {\n        this.videoElem.currentTime = this.props.position;\n      }\n\n      if (this.videoElem.paused) {\n        this.videoElem.play();\n      }\n    }\n  }\n}\n","import _presets from \"./presets.json\";\nimport _fileTree from \"./videos.json\";\n\nexport type VideoData = [string, string, string] | \"linebreak\";\n\nexport const presets = _presets as {\n  \"name\": string,\n  \"videos\": VideoData[]\n}[];\n\nexport const fileTree = _fileTree as {\n  [environment: string]: {\n    [adversary: string]: {\n      [victim: string]: string;\n    };\n  };\n};\n\nexport function getDefaultPreset(): VideoData[] {\n  return presets[0].videos;\n}\n\nexport function getVideoFile(video: VideoData): string {\n  return fileTree[video[0]][video[1]][video[2]];\n}\n","import React from \"react\";\nimport ReactModal from \"react-modal\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {fileTree, presets, VideoData} from \"../../data\";\n\nimport \"./index.scss\";\n\ninterface VideoPickerProps {\n  onLoadPreset: (videos: VideoData[]) => void;\n  onAddVideo: (videoUrl: VideoData) => void;\n  onRestartVideos: () => void;\n  alreadyPickedVideos: VideoData[];\n}\n\ninterface VideoPickerState {\n  pickerOpen: boolean;\n  selectedEnvironment: string | null;\n  selectedAdversary: string | null;\n}\n\nexport default class VideoPicker extends React.Component<\n  VideoPickerProps,\n  VideoPickerState\n> {\n  constructor(props: VideoPickerProps) {\n    super(props);\n    this.openVideoPicker = this.openVideoPicker.bind(this);\n    this.onPickerCancel = this.onPickerCancel.bind(this);\n    this.onLoadPreset = this.onLoadPreset.bind(this);\n    this.onRestartVideos = this.onRestartVideos.bind(this);\n    this.state = {\n      pickerOpen: false,\n      selectedEnvironment: null,\n      selectedAdversary: null\n    };\n  }\n\n  public render() {\n    return (\n      <>\n        <div\n          className=\"btn-group\"\n          role=\"group\"\n          aria-label=\"Comparison controls\"\n        >\n          {this.state.pickerOpen ||\n            <button\n              className=\"btn btn-primary\"\n              onClick={this.openVideoPicker}\n            >\n              <FontAwesomeIcon icon=\"plus\" /> Add\n            </button>\n          }\n\n          <div className=\"btn-group\">\n            <button\n              className=\"btn btn-primary dropdown-toggle\"\n              id=\"load-preset-button\"\n              data-toggle=\"dropdown\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"false\"\n            >\n              Load Preset\n            </button>\n            <div\n              className=\"dropdown-menu\"\n              aria-labelledby=\"load-preset-button\"\n            >\n              {presets.map(({ name, videos }) => (\n                <button\n                  key={name}\n                  className=\"dropdown-item\"\n                  onClick={this.onLoadPreset.bind(this, videos)}\n                >\n                  {name}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          <button className=\"btn btn-secondary\" onClick={this.onRestartVideos}>\n            <FontAwesomeIcon icon=\"fast-backward\" /> Restart\n          </button>\n\n          <button className=\"btn btn-danger\" onClick={this.onLoadPreset.bind(this, [])}>\n            <FontAwesomeIcon icon=\"ban\" /> Clear\n          </button>\n        </div>\n\n        <ReactModal\n          isOpen={this.state.pickerOpen}\n          contentLabel=\"Select video to add to comparison\"\n          shouldCloseOnOverlayClick={false}\n        >\n          <button\n            className=\"btn btn-secondary VideoPicker__close\"\n            onClick={this.onPickerCancel}\n            aria-label=\"Close picker\"\n          >\n            <FontAwesomeIcon icon=\"window-close\" />\n          </button>\n\n          <div className=\"container-fluid\">\n            <div className=\"row\">\n              <div className=\"col-4\">\n                <h2 className=\"text-center\">Environment</h2>\n              </div>\n              <div className=\"col-4\">\n                <h2 className=\"text-center\">Opponent</h2>\n              </div>\n              <div className=\"col-4\">\n                <h2 className=\"text-center\">Victim</h2>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col-4\">\n                <ul className=\"list-group\">\n                  {Object.keys(fileTree).map(environment => (\n                    <li\n                      key={environment}\n                      className={`list-group-item ${\n                        environment === this.state.selectedEnvironment\n                          ? \"active\"\n                          : \"\"\n                        }`}\n                    >\n                      <button\n                        className=\"btn btn-block\"\n                        onClick={this.onSelectEnvironment.bind(this, environment)}\n                      >\n                        {environment}\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n              {this.state.selectedEnvironment !== null && (\n                <>\n                  <div className=\"col-4\">\n                    <ul className=\"list-group\">\n                      {Object.keys(fileTree[this.state.selectedEnvironment]).map(\n                        adversary => (\n                          <li\n                            key={adversary}\n                            className={`list-group-item ${\n                              adversary === this.state.selectedAdversary\n                                ? \"active\"\n                                : \"\"\n                              }`}\n                          >\n                            <button\n                              className=\"btn btn-block\"\n                              onClick={this.onSelectAdversary.bind(\n                                this,\n                                adversary\n                              )}\n                            >\n                              {adversary}\n                            </button>\n                          </li>\n                        )\n                      )}\n                    </ul>\n                  </div>\n                  {this.state.selectedAdversary !== null && (\n                    <div className=\"col-4\">\n                      <ul className=\"list-group\">\n                        {Object.keys(\n                          fileTree[this.state.selectedEnvironment][\n                            this.state.selectedAdversary\n                            ]\n                        ).map(victim => (\n                          <li key={victim} className=\"list-group-item\">\n                            <button\n                              className=\"btn btn-block\"\n                              onClick={this.onPick.bind(this, [\n                                this.state.selectedEnvironment as string,\n                                this.state.selectedAdversary as string,\n                                victim\n                              ])}\n                              disabled={videoIn(\n                                [\n                                  this.state.selectedEnvironment as string,\n                                  this.state.selectedAdversary as string,\n                                  victim\n                                ],\n                                this.props.alreadyPickedVideos\n                              )}\n                            >\n                              {victim}\n                            </button>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </ReactModal>\n      </>\n    );\n  }\n\n  private openVideoPicker() {\n    this.setState({ pickerOpen: true });\n  }\n\n  private onPickerCancel() {\n    this.setState({ pickerOpen: false });\n  }\n\n  private onPick(video: VideoData) {\n    this.setState({ pickerOpen: false });\n    this.props.onAddVideo(video);\n  }\n\n  private onLoadPreset(videos: VideoData[]) {\n    this.props.onLoadPreset(videos);\n  }\n\n  private onRestartVideos() {\n    this.props.onRestartVideos();\n  }\n\n  private onSelectEnvironment(enviroment: string) {\n    this.setState({\n      selectedEnvironment: enviroment,\n      selectedAdversary: null\n    });\n  }\n\n  private onSelectAdversary(adversary: string) {\n    this.setState({\n      selectedAdversary: adversary\n    });\n  }\n}\n\nfunction videoIn(needle: VideoData, videos: VideoData[]) {\n  const comparableVideos = videos.map(video => JSON.stringify(video));\n  return comparableVideos.indexOf(JSON.stringify(needle)) > -1;\n}\n","import React from \"react\";\nimport VideoContainer from \"../VideoContainer\";\nimport Video from \"../Video\";\nimport { getDefaultPreset, getVideoFile, VideoData } from \"../../data\";\nimport VideoPicker from \"../VideoPicker\";\n\ninterface VideoExplorerProps {}\n\ninterface VideoExplorerState {\n  videos: VideoData[];\n  videoLengths: { [videoUrl: string]: number };\n  videoPosition: number;\n  lastLoopStarted: number;\n  updateInterval?: number;\n}\n\nexport default class VideoExplorer extends React.Component<\n  VideoExplorerProps,\n  VideoExplorerState\n> {\n  constructor(props: VideoExplorerProps) {\n    super(props);\n    this.state = {\n      videos: getDefaultPreset(),\n      videoLengths: {},\n      videoPosition: 0,\n      lastLoopStarted: window.performance.now()\n    };\n    this.onAddVideo = this.onAddVideo.bind(this);\n    this.onLoadPreset = this.onLoadPreset.bind(this);\n    this.onRestartVideos = this.onRestartVideos.bind(this);\n    this.tick = this.tick.bind(this);\n  }\n\n  public render() {\n    return (\n      <>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col offset-sm-2\">\n              <h2 id=\"videos\">Explore Videos</h2>\n            </div>\n            <div className=\"col col-auto\">\n              <VideoPicker\n                onAddVideo={this.onAddVideo}\n                onLoadPreset={this.onLoadPreset}\n                alreadyPickedVideos={this.state.videos}\n                onRestartVideos={this.onRestartVideos}\n              />\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col offset-sm-2\">\n              <p>Use \"Load Preset\" to compare videos from the same environment.\n                 Use the \"Add\" button to explore beyond the presets.\n                 By default, the videos are synchronized.\n                 Click the lock icon to unlock the playback controls.\n              </p>\n            </div>\n          </div>\n        </div>\n        <VideoContainer>\n          {this.state.videos.map(video => (\n            video === \"linebreak\"\n            ? <br />\n            : <Video\n              key={JSON.stringify(video)}\n              name={`${video[0]}: ${video[1]} vs ${video[2]}`}\n              videoFile={getVideoFile(video)}\n              position={this.state.videoPosition / 1000}\n              onVideoDurationKnown={this.onVideoDurationKnown.bind(\n                this,\n                getVideoFile(video)\n              )}\n              onVideoRemove={this.onRemoveVideo.bind(this, video)}\n            />\n          ))}\n        </VideoContainer>\n      </>\n    );\n  }\n\n  public componentDidMount(): void {\n    setInterval(this.tick, 80);\n  }\n\n  public componentWillUnmount() {\n    clearInterval(this.state.updateInterval);\n  }\n\n  private onLoadPreset(videos: VideoData[]) {\n    const videoFiles = videos.map(video => (\n      video === \"linebreak\"\n      ? \"\"\n      : getVideoFile(video))\n    );\n    const videoLengths: { [videoUrl: string]: number } = {};\n\n    Object.entries(this.state.videoLengths).forEach(([videoFile, length]) => {\n      if (videoFiles.indexOf(videoFile) > -1) {\n        videoLengths[videoFile] = this.state.videoLengths[videoFile];\n      }\n    });\n    this.setState({\n      videos,\n      videoLengths: videoLengths,\n      videoPosition: 0,\n      lastLoopStarted: window.performance.now(),\n    });\n  }\n\n  private onAddVideo(video: VideoData) {\n    const videos = this.state.videos.slice();\n    videos.push(video);\n\n    this.setState({\n      videos,\n    });\n  }\n\n  private onRemoveVideo(videoToRemove: VideoData) {\n    const { videos, videoLengths } = this.state;\n    const videoFileToRemove = getVideoFile(videoToRemove);\n    delete videoLengths[videoFileToRemove];\n    this.setState({\n      videos: videos.filter(video => JSON.stringify(video) !== JSON.stringify(videoToRemove)),\n      videoLengths,\n    });\n  }\n\n  private onVideoDurationKnown(videoUrl: string, duration: number) {\n    this.setState({\n      videoLengths: {\n        ...this.state.videoLengths,\n        [videoUrl]: duration * 1000\n      }\n    });\n  }\n\n  private onRestartVideos() {\n    if (Object.values(this.state.videoLengths).length > 0) {\n      this.setState({\n        videoPosition: 0,\n        lastLoopStarted: window.performance.now(),\n      });\n    }\n  }\n\n  private getMaxVideoLength() {\n    if (Object.values(this.state.videoLengths).length === 0) {\n      return -1;\n    }\n\n    return Math.max(...Object.values(this.state.videoLengths));\n  }\n\n  private tick() {\n    const now = window.performance.now();\n\n    const currentLoopTime = now - this.state.lastLoopStarted;\n    if (currentLoopTime > this.getMaxVideoLength()) {\n      this.setState({\n        videoPosition: 0,\n        lastLoopStarted: now,\n      });\n    } else {\n      this.setState({\n        videoPosition: currentLoopTime,\n      });\n    }\n  }\n}\n","import React, { FunctionComponent } from \"react\";\n\nimport Content from \"./components/Content\";\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport VideoExplorer from \"./components/VideoExplorer\";\n\nconst App: FunctionComponent = () => (\n  <>\n    <Header />\n    <Content />\n    <VideoExplorer />\n    <Footer />\n  </>\n);\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faGithub } from \"@fortawesome/free-brands-svg-icons\";\nimport {\n  faBan,\n  faExternalLinkAlt,\n  faFastBackward,\n  faFile,\n  faLock,\n  faPause,\n  faPlay,\n  faPlus,\n  faUnlock,\n  faWindowClose,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport \"./index.scss\";\n\nimport App from \"./App\";\n\nlibrary.add(\n  faBan,\n  faExternalLinkAlt,\n  faFastBackward,\n  faFile,\n  faGithub,\n  faLock,\n  faPause,\n  faPlay,\n  faPlus,\n  faUnlock,\n  faWindowClose\n);\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}